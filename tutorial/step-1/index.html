<!DOCTYPE html><html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="WildFly Swarm Official Website"><link rel="icon" href="/favicon.ico"><link rel="alternate" type="application/rss+xml" title="RSS Feed for wildfly-swarm.io" href="/rss.xml"><title>WildFly Swarm</title><link rel="stylesheet" media="screen" href="/lib/bootstrap/css/bootstrap.min.css"><link rel="stylesheet" media="screen" href="/css/site.css"><link rel="stylesheet" media="screen" href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,800"><link rel="stylesheet" media="screen" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"><link rel="stylesheet" media="screen" href="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/styles/default.min.css"></head><body><nav class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar" class="navbar-toggle collapsed"><span class="sr-only"></span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="/" class="navbar-brand"><img src="/images/swarm_icon_32x32.png" class="icon"><span>WildFly Swarm</span></a></div><div id="navbar" class="navbar-collapse collapse"><ul class="nav navbar-nav"><li><a href="/generator" class="hidden-xs hidden-sm hidden-md">Generator<span class="badge">new!</span></a></li><li><a href="/archive">Blog</a></li><li><a href="/documentation">Documentation</a></li><li><a href="/downloads">Downloads</a></li><li><a href="/community">Community</a></li><li><a href="/resources">Resources</a></li><li><a href="https://github.com/wildfly-swarm/wildfly-swarm" class="hidden-xs hidden-sm hidden-md">GitHub</a></li></ul></div></div></nav><section class="section"><div class="container"><div class="row"><div class="col-sm-8"><h1 id="_step_1_services_the_old_way" class="sect0">Step 1: Services the 'old' way</h1>
<div class="paragraph">
<p>This activity demonstrates the “default” way of installing services as regular war’s on WildFly, with two exceptions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The services already use Consul for lookup and registration</p>
</li>
<li>
<p>All services interact over REST/HTTP, although being deployed to the same JVM</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This step provides an overview of code that exists, possible service boundaries, module dependencies and allows you to make yourself familiar with the application use cases using the web frontend
(which is something we want to retain)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="../img/step-1.png" alt="step 1.png">
</div>
<div class="title">Figure 1. Components within single JVM</div>
</div>
<div class="sect1">
<h2 id="_concepts">Concepts</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Moving from In-VM communication to remote invocations (REST)</p>
</li>
<li>
<p>Service as single .war deployments</p>
</li>
<li>
<p>Service registration and discovery</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tasks">Tasks</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Build the whole project. This results in several .war files</p>
</li>
<li>
<p>Deploy each .war file (order,catalog,user &amp; everest) to WildFly. This can be achieved using <code>mvn wildfly:&lt;deploy|undeploy&gt;</code> in each respective module directory or through the WildFLy admin console.</p>
</li>
<li>
<p>Access the everest web interface running on WildFly (<code><a href="http://&lt;WILDFLY_IP&gt;:8080/everest-web" class="bare">http://&lt;WILDFLY_IP&gt;:8080/everest-web</a></code>) and make yourself familiar with the application. Try to browse books, put one in your cart and checkout to complete the “purchase”.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_outcome">Outcome</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The whole application, previously installed as a single deployment now runs on WildFly and it works as expected (chose books, add to cart, checkout, etc)</p>
</li>
<li>
<p>Although deployed to a single VM, the services already use the service registry (consul) to for lookup (opposed to let’s say JNDI).</p>
</li>
<li>
<p>Once all services are deployed, you can invoke the REST interfaces as well (i.e. using cUrl), i.e. <code><a href="http://&lt;WILDFLY_IP&gt;:8080/catalog/resources/catalog/" class="bare">http://&lt;WILDFLY_IP&gt;:8080/catalog/resources/catalog/</a></code></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_documentation">Documentation</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>The existing sources, in particular the order, user, catalog for the services. Furthermore the services module for the consul integration and the “everest” module that contains the frontend.</p>
</li>
<li>
<p><a href="https://www.consul.io/intro/" class="bare">https://www.consul.io/intro/</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>
<div class="row">
  <div class="col-md-6">
<a href="/tutorial/step-0" class="btn btn-primary"><i class="fa fa-chevron-left" aria-hidden="true"></i> Step 0: A manageable codebase</a>
  </div>
  <div class="col-md-6">
  <a href="/tutorial/step-2" class="btn btn-primary">Step 2: Right-size your runtime
<i class="fa fa-chevron-right" aria-hidden="true"></i></a>
  </div>
</div>
</p>
</div>
</div>
</div></div><div class="col-sm-3 col-sm-offset-1"><div class="sidebar panel panel-default"><ul><li><a href="/tutorial">Introduction</a></li><li><a href="/tutorial/sources">Source Code</a></li><li><a href="/tutorial/example-app">Example Application</a></li><li><a href="/tutorial/prerequisites">Prerequisites</a></li><li><a href="/tutorial/step-0">Step 0: A manageable codebase</a></li><li><a href="/tutorial/step-1">Step 1: Services the old way</a></li><li><a href="/tutorial/step-2">Step 2: Right-size your runtime</a></li><li><a href="/tutorial/step-3">Step 3: Container API, Fractions and Deployments</a></li><li><a href="/tutorial/step-4">Step 4: Environment specific configuration</a></li><li><a href="/tutorial/step-5">Step 5: Fault tolerance and resilience</a></li><li><a href="/tutorial/step-6">Step 6: Load balancing and failover</a></li><li><a href="/tutorial/toxy">Appendix A: Fault-injection proxy</a></li><li><a href="/tutorial/hystrix">Appendix B: Hystrix Dashboard</a></li><li class="last"><a href="/tutorial/reading">Reading on Microservices </a></li></ul></div></div></div><div class="row"><div class="col-sm-8"><div id="disqus_thread"><script> var disqus_config = function () { this.page.url = PAGE_URL; this.page.identifier = PAGE_IDENTIFIER;}; (function() { var d = document, s = d.createElement('script'); s.src = '//wildflyswarm.disqus.com/embed.js'; s.setAttribute('data-timestamp', +new Date()); (d.head || d.body).appendChild(s); })(); 
</script></div></div></div></div></section><div class="container"><div class="footer"><div class="col-sm-6"><p class="text-center">&copy; Copyright 2016 <a href="http://redhat.com">Red Hat, Inc.</a> | WildFly Swarm is Open Source Software</p></div><div class="col-sm-6"><p class="text-center"><span>We rely on the
<a href='http://www.ej-technologies.com/products/jprofiler/overview.html'>
Java profiler from EJ Technologies
</a><br/>
<img src='https://www.ej-technologies.com/images/product_banners/jprofiler_medium.png'/></span></p></div></div></div><script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="/lib/bootstrap/js/bootstrap.min.js"></script><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-6435340-8', 'auto');
ga('send', 'pageview');

</script><script src="//www.redhat.com/j/s_code.js"></script><script src="http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.4.0/highlight.min.js"></script><script>(function() {

  // Load the path name, without it's inital /
  var arr = location.pathname.substr(1, location.pathname.length)
      .toLowerCase().split('/');

  // If the path ends in index.html or whitespace, trim the array
  if (arr[arr.length - 1] == "index.html" || arr[arr.length - 1] == "" ) {
     arr.pop();
  }

  /*
  * Assign values to Adobe Analytics properties
  */
  s.channel = "wildflyswarm| {{Channel}}" // The channel is our top level classification
  s.server = "wildflyswarm" // The server is ???
  s.pageName = "wildflyswarm| {{Channel}} | " + (arr[arr.length -1] || "homepage"); // pageName is wildflyswarm | <Channel> | {page_name}. {page_name} has index.html removed
  s.prop2 = s.eVar22 = "en"; // prop2/eVar22 is the ISO 639-1 language code
  s.prop4 = s.eVar23 = encodeURI(location.search); //prop4/eVar23 is the query string of the page

  // Pad the array as needed, so we can shift away later
  for (var i = arr.length; i < 3; i++) {
      arr[i] = "";
  }

  s.prop14 = s.eVar27 = arr.shift(); // prop14/eVar27 is the first minor section (normally /{minor_section_1})
  s.prop15 = s.eVar28 = arr.shift(); // prop15/eVar28 is the second minor section (normally /a/{minor_section_2})
  s.prop16 = s.eVar29 = arr.shift(); // prop16/eVar29 is the third minor section (normally /a/b/{minor_section_3})
  s.prop21 = s.eVar18 = encodeURI(location.hostname+location.pathname).toLowerCase(); // prop21/eVar18 is the URL, less any query strings or fragments

  })();
</script><script src="//www.redhat.com/assets/js/tracking/rh_omni_footer.js"></script><script>(function() {
  hljs.initHighlightingOnLoad();
})();
</script></body></html>